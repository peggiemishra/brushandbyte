<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Brushes and Bytes — Peggie Mishra</title>

    <!-- Bootstrap (for layout + modal) -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" crossorigin="anonymous">

    <!-- Your styles -->
    <link href="album.css" rel="stylesheet">
  </head>
  <body>

    <!-- Header -->
    <header>
      <nav class="navbar">
        <div class="container d-flex justify-content-between">
          <a class="navbar-brand" href="#">Brushes & Bytes</a>
          <div class="text-muted">Creations : Peggie Mishra</div>
        </div>
      </nav>
    </header>

    <!-- Main -->
    <main role="main">
      <!-- Welcome Section -->
      <section class="jumbotron text-center">
        <div class="container">
          <div class="welcome-box" role="banner">
            <img src="images/brush-paint.png" alt="brush and paint">
            <div>
              <h1 class="jumbotron-heading">Welcome to Brushes and Bytes</h1>
              <p class="lead text-muted">A hand-coded portfolio where pigment meets pixels.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Gallery -->
      <div class="album">
        <div class="container">
          <!-- The script will fill this automatically -->
          <div class="card-grid"></div>
        </div>
      </div>

      <!-- Modal for large image view -->
      <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content" style="background:transparent;border:0;">
            <div class="modal-body">
              <img class="img-responsive" src="" alt="expanded view" />
            </div>
            <div class="modal-footer" style="border-top:0;background:transparent;">
              <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <p>Brushes & Bytes • Peggie Mishra</p>
      </div>
    </footer>

    <!-- JS (jQuery, Popper, Bootstrap) -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <!-- Gallery auto-generator -->
    <script>
    /*
      Auto-generates the gallery grid from all image files
      inside your public GitHub repo's "images/" folder.
      Works automatically whenever you add new files there.
    */
    $(function(){
      const owner = 'peggiemishra';
      const repo  = 'brushandbyte';   // make sure this matches your repo name
      const branch = 'main';          // or 'master' if that's your default
      const imagesPath = 'images';
      const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${imagesPath}?ref=${branch}`;
      const $grid = $('.card-grid');
      const imageExt = /\.(jpe?g|png|gif|webp|svg)$/i;

      function tidyCaption(filename){
        const name = filename.replace(imageExt, '').replace(/[-_]+/g, ' ').trim();
        return name.split(' ').map(w => w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
      }

      $.getJSON(apiUrl)
        .done(files => {
          const images = files.filter(f => imageExt.test(f.name));
          if(!images.length){
            $grid.append('<p style="color:#999">No images found in your images/ folder yet.</p>');
            return;
          }

          images.forEach(f => {
            const imgUrl = f.download_url;
            const caption = tidyCaption(f.name);
            const $card = $(`
              <div class="card">
                <img src="${imgUrl}" alt="${caption}" loading="lazy" data-toggle="modal" data-target="#myModal">
                <p class="card-text">${caption}</p>
              </div>
            `);
            $grid.append($card);
          });
        })
        .fail(err => {
          console.warn('Could not load images automatically.', err);
          $grid.append('<p style="color:#f88">Failed to load images automatically. (Is the repo public?)</p>');
        });

      // Modal behavior
      $('#myModal').on('show.bs.modal', function (e) {
        var image = $(e.relatedTarget).attr('src');
        $(".img-responsive").attr("src", image);
      });
    });
    </script>
  </body>
</html>
